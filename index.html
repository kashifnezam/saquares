<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Squares Memory Trainer</title>

<style>
    body {
        font-family: Poppins, sans-serif;
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #dbeafe, #e9d5ff);
        transition: 0.3s;
        text-align: center;
    }

    body.dark {
        background: #0f172a;
        color: white;
    }

    h1 {
        margin-top: 0;
        color: #312e81;
    }
    body.dark h1 { color: #a5b4fc; }

    .button-row {
        margin: 20px 0;
    }

    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 10px;
        background: #6366f1;
        color: white;
        cursor: pointer;
        font-size: 16px;
        margin: 5px;
    }
    .btn:hover { background: #4f46e5; }

    body.dark .btn {
        background: #475569;
    }

    /* Study Grid */
    .grid {
        display: none;
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        gap: 15px;
        margin-top: 20px;
    }
    .card {
        background: white;
        padding: 15px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    body.dark .card { background: #1e293b; color: white; }

    .number { font-size: 22px; font-weight: bold; color: #3b82f6; }
    .square { font-size: 18px; color: #7c3aed; }

    /* Quiz Mode */
    #quizSection, #mcqSection { display: none; }

    #question {
        font-size: 26px;
        margin-top: 20px;
    }

    input {
        padding: 12px;
        width: 200px;
        border-radius: 8px;
        border: 1px solid #94a3b8;
        text-align: center;
        font-size: 20px;
    }

    #feedback { margin-top: 20px; font-size: 20px; }

    #score, #timer {
        margin-top: 15px;
        font-size: 18px;
    }

    /* MCQ Buttons */
    .mcq-option {
        display: block;
        width: 250px;
        padding: 10px;
        margin: 8px auto;
        border-radius: 8px;
        border: 2px solid #6366f1;
        cursor: pointer;
        background: white;
    }
    body.dark .mcq-option { background: #1e293b; color: white; }

    .mcq-option:hover { background: #e0e7ff; }
</style>
</head>

<body>

<h1>Squares Memory Trainer (2 to 50)</h1>

<div class="button-row">
    <button class="btn" onclick="showStudy()">üìò Study Mode</button>
    <button class="btn" onclick="startQuiz()">üß† Quiz Mode</button>
    <button class="btn" onclick="startMCQ()">‚ùì MCQ Mode</button>
    <button class="btn" onclick="toggleDark()">üåô Dark Mode</button>
</div>

<!-- Study Mode -->
<div id="studyGrid" class="grid"></div>

<!-- Quiz Mode -->
<div id="quizSection">
    <div id="timer"></div>
    <div id="question"></div>
    <input id="answer" type="number" placeholder="Your answer" onkeypress="checkEnter(event)">
    <br><br>
    <button class="btn" onclick="checkAnswer()">Submit</button>
    <div id="feedback"></div>
    <div id="score"></div>
</div>

<!-- MCQ Mode -->
<div id="mcqSection">
    <div id="mcqQuestion"></div>
    <button class="mcq-option" onclick="checkMCQ(0)" id="opt0"></button>
    <button class="mcq-option" onclick="checkMCQ(1)" id="opt1"></button>
    <button class="mcq-option" onclick="checkMCQ(2)" id="opt2"></button>
    <button class="mcq-option" onclick="checkMCQ(3)" id="opt3"></button>
    <div id="mcqFeedback"></div>
</div>

<!-- Sounds -->
<audio id="correctSound" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="wrongSound" src="https://assets.mixkit.co/active_storage/sfx/997/997-preview.mp3"></audio>

<script>
/* ---------------- Study Mode ---------------- */
const studyGrid = document.getElementById("studyGrid");
for (let i = 2; i <= 50; i++) {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `<div class='number'>${i}</div>=<div class='square'>${i*i}</div>`;
    studyGrid.appendChild(card);
}

function showStudy(){
    studyGrid.style.display = "grid";
    quizSection.style.display = "none";
    mcqSection.style.display = "none";
}

/* ---------------- Quiz Mode ---------------- */
let currentNumber = 0, correct = 0, total = 0;
let timerInterval, timeLeft = 20;

function startQuiz(){
    studyGrid.style.display = "none";
    mcqSection.style.display = "none";
    quizSection.style.display = "block";

    correct = 0; total = 0;
    askQuestion();
    startTimer();
}

function startTimer(){
    timeLeft = 20;
    document.getElementById("timer").innerText = `‚è≥ Time: ${timeLeft}s`;

    clearInterval(timerInterval);
    timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").innerText = `‚è≥ Time: ${timeLeft}s`;

        if(timeLeft <= 0){
            clearInterval(timerInterval);
            checkAnswer(true); // auto wrong
        }
    }, 1000);
}

function askQuestion(){
    currentNumber = Math.floor(Math.random()*49)+2;
    document.getElementById("question").innerText = `What is ${currentNumber}¬≤ ?`;
    document.getElementById("answer").value="";
    document.getElementById("feedback").innerText="";
}

function checkAnswer(auto=false){
    const userAns = Number(document.getElementById("answer").value);
    const correctAns = currentNumber * currentNumber;
    total++;

    if(userAns === correctAns && !auto){
        document.getElementById("feedback").style.color="green";
        document.getElementById("feedback").innerText="‚úì Correct!";
        document.getElementById("correctSound").play();
        correct++;
    } else {
        document.getElementById("feedback").style.color="red";
        document.getElementById("feedback").innerText=`‚úó Wrong! Correct: ${correctAns}`;
        document.getElementById("wrongSound").play();
    }

    document.getElementById("score").innerText = `Score: ${correct}/${total}`;

    clearInterval(timerInterval);
    setTimeout(() => { askQuestion(); startTimer(); }, 1300);
}

function checkEnter(e){ if(e.key==="Enter") checkAnswer(); }

/* ---------------- MCQ Mode ---------------- */
function startMCQ(){
    quizSection.style.display = "none";
    studyGrid.style.display = "none";
    mcqSection.style.display = "block";
    generateMCQ();
}

function generateMCQ(){
    let num = Math.floor(Math.random()*49)+2;
    let correct = num*num;

    document.getElementById("mcqQuestion").innerHTML = `<h2>What is ${num}¬≤ ?</h2>`;

    let answers = [correct];
    while(answers.length < 4){
        let wrong = correct + Math.floor(Math.random()*80) - 40;
        if(wrong > 0 && !answers.includes(wrong)) answers.push(wrong);
    }

    answers.sort(() => Math.random()-0.5);

    answers.forEach((val, i) => {
        document.getElementById("opt"+i).innerText = val;
        document.getElementById("opt"+i).setAttribute("data-value", val);
    });

    window.correctMCQ = correct;
}

function checkMCQ(index){
    let val = Number(document.getElementById("opt"+index).getAttribute("data-value"));
    let feedback = document.getElementById("mcqFeedback");

    if(val === window.correctMCQ){
        feedback.style.color = "limegreen";
        feedback.innerText = "‚úì Correct!";
        document.getElementById("correctSound").play();
    } else {
        feedback.style.color = "red";
        feedback.innerText = "‚úó Wrong!";
        document.getElementById("wrongSound").play();
    }

    setTimeout(() => {
        feedback.innerText="";
        generateMCQ();
    }, 1000);
}

/* ---------------- Dark Mode ---------------- */
function toggleDark(){
    document.body.classList.toggle("dark");
}
</script>

</body>
</html>
